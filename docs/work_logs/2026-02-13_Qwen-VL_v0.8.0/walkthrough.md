# 워크쓰루: Qwen-VL 인물 분석 고도화 및 라이브러리화

이번 작업을 통해 Qwen-VL 모델을 활용한 정밀 인물 분석 엔진을 구축하고, 이를 프로젝트 공용 라이브러리로 자산화하였습니다. 특히 CPU/MPS 환경에서의 안정적인 구동을 위한 최적화 기법을 적용했습니다.

## 주요 변경 사항

### 1. Qwen-VL 엔진 고도화 및 안정화
- **정밀 인물 분석 (`detect_and_analyze_persons`)**: 성별, 연령대, 바운딩 박스를 추출하는 통합 분석 메서드를 구현했습니다.
- **텐서 불일치 해결 (Troubleshooting)**: 고해상도 이미지 처리 시 발생하는 `Dimension Mismatch` 오류를 이미지 강제 리사이징(1200px 제한) 및 픽셀 임계값 조정을 통해 해결하여 시스템 안정성을 확보했습니다.

### 2. 신규 데이터 자산화 기능 (New Features)
- **속성 벡터화 (`vectorize_attributes`)**: 추출된 속성을 1D 특징 벡터로 변환하여 Re-ID 및 머신러닝 분석과 연동할 수 있게 했습니다.
- **거리 및 3D 위치 추정**: 바운딩 박스 높이 기반의 거리 추정(`estimate_distance`)과 화면 좌표 투영을 통한 3D 위치 계산(`calculate_location`) 기능을 추가했습니다.

### 3. 웹 비주얼라이저 및 공통 부트스트랩 확장
- **공통 초기화 함수 (`bootstrap_vision_app`)**: 모델 로딩, 디렉토리 생성, 로그 설정을 단일 함수 호출로 처리하는 통합 부트스트랩 기능을 `WebAppSDK`에 추가했습니다.
- **시각화 오버레이**: 탐지된 인물 위에 추정 거리(m)를 실시간으로 표시하는 기능을 `WebAppSDK`에 통합했습니다.
- **결과 리포트**: `detect_person_list.md`에 거리 및 특징 벡터 컬럼을 추가하여 분석 결과의 자산화를 가속화했습니다.

## 검증 결과

### 통합 테스트
- `integrator.py`를 통해 전체 파이프라인(탐지->벡터화->거리추정->리포트)의 에러 없는 작동을 확인했습니다.
- CPU/MPS 환경에서의 실시간 추론 안정성을 검증했습니다.

### 시각화 및 문서 확인
- `results/output_analysis.jpg`: 인물 탐지 및 거리 정보 오버레이 확인.
- `docs/Library-Manual.ko.md`: 신규 함수들의 상세 설명 및 예제 포함 완료.
